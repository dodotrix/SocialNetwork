@using Microsoft.AspNet.Identity
@using MiniFacebook.Domena.Helpers
@model MiniFacebook.Models.UserViewModel


@if (User.Identity.GetNickname() == Model.Nickname)
{

    if (Model.UserPhoto == null)
    {
        using (Html.BeginForm("UploadUserPhoto", "User", FormMethod.Post, new { @class = "form-horizontal", role = "form", enctype = "multipart/form-data" }))
        {
            <h3>Please upload your photo to start creating your profile.</h3>
            <img id="uploaded" />
            <br/>
            <label class="btn btn-default">
                Browse<input type="file" name="UserPhoto" id="fileUpload" accept=".png,.jpg,.jpeg,.gif" onchange="readURL(this);" hidden />
            </label>
            <button type="submit" class="btn btn-default">Submit</button>

            <div>
                <b>First Name: </b> @Model.FirstName <br />
                <b>Last Name: </b> @Model.LastName <br />
                <b>User Name: </b> @Model.Nickname <br />
                <b>From: </b> @Model.DrzavaNaziv <br />
            </div>

        }
    }
    else
    {
        <div class="row">
            <div class="col-sm-2">
                <img src="@Url.Action("UserPhoto", "User", new { username = Model.Nickname }, null)" style="width:200px; height:200px;" />
            </div>
        </div>
        <div>
            <b>First Name: </b> @Model.FirstName <br />
            <b>Last Name: </b> @Model.LastName <br />
            <b>User Name: </b> @Model.Nickname <br />
            <b>From: </b> @Model.DrzavaNaziv <br />
        </div>
    }
}
else
{
    if (Model.UserPhoto == null)
    {

        <div>
            <b>First Name: </b> @Model.FirstName <br />
            <b>Last Name: </b> @Model.LastName <br />
            <b>User Name: </b> @Model.Nickname <br />
            <b>From: </b> @Model.DrzavaNaziv <br />
        </div>
    }
    else
    {
        <div class="row">
            <div class="col-sm-2">
                <img src="@Url.Action("UserPhoto", "User", new { username = Model.Nickname }, null)" style="width:200px; height:200px;" />
            </div>
        </div>
        <div>
            <b>First Name: </b> @Model.FirstName <br />
            <b>Last Name: </b> @Model.LastName <br />
            <b>User Name: </b> @Model.Nickname <br />
            <b>From: </b> @Model.DrzavaNaziv <br />
        </div>
    }
}



<script>
    function readURL(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
                $('#uploaded').attr('src', e.target.result)
                    .width(150)
                    .height(200);
            };

            reader.readAsDataURL(input.files[0]);
        }
    }

    
</script>